/*
 *  navbar.scss
 */

@use "./theme.scss" as *;


// Framework7 CSS variables
:root {
  --f7-navbar-height: 64px;
  --f7-subnavbar-height: 48px;
  --f7-toolbar-height: 48px;
  --f7-navbar-bg-color: #{$navbar-background};
}

// Fix for toolbar at bottom of DOM (after page-content) for accessibility
// Framework7's .toolbar-bottom ~ * selector only works when toolbar precedes siblings
// Use :has() to set the offset when page contains a bottom toolbar
.page:has(.toolbar-bottom-md.app-toolbar) {
  --f7-page-toolbar-bottom-offset: var(--f7-toolbar-height);
}

// Also handle safe-area-inset-bottom for the toolbar itself when at bottom
.toolbar-bottom-md.app-toolbar {
  padding-bottom: env(safe-area-inset-bottom);
}

#app .toolbar {
  .button {
    border: none;
  }
}


#app .navbar {
  color: $navbar-textcolor;
  border: 0px;
}

#app .navbar a,
#app .toolbar a {
  color: white;
  padding-left: 16px;
  padding-right: 16px;
}

#app .navbar .subnavbar {
  border-bottom: 2px solid $subnavbar-background;

  a {
    color: $navbar-textcolor;
  }
}

#app .navbar .subnavbar,
.navbar .searchbar {
  background-color: white;

  .searchbar-input-wrap {
    border: 2px solid $subnavbar-background;
  }
}

.back>i {
  font-weight: bolder;
}

.global-search {
  display: none;
}

#app.global-search-in .global-search {
  display: inherit;
}

/* Center the navbar title even in md theme */
.navbar .title {
  display: flex;
  justify-content: center;
  position: relative;
  flex-grow: 1;
  max-height: 100%;
  overflow: visible;

  // Focus style for Hesperian logo link
  a:has(.hesperian-logo-image) {
    display: flex;
    align-items: flex-end;
    gap: 6px;
    padding-bottom: 4px;
    text-decoration: none;
    font-size: 24px;
    font-weight: 400;
    letter-spacing: 0.5px;

    &:focus,
    &:focus-visible {
      outline: 2px solid var(--hm-focus-color-secondary) !important;
      outline-offset: 0 !important;
      box-shadow: 0 0 0 4px var(--hm-focus-color) !important;
    }
  }
}

.navbar .title .hesperian-logo-image {
  height: 45px;
  align-self: center;
}

/* Disable f7 horizontal rules */
.navbar:after {
  display: none;
}

// Symmetric spacing for navbar left/right icon containers
$navbar-icon-edge-spacing: 8px;

.navbar .left {
  margin-left: $navbar-icon-edge-spacing;
  height: 100%;
  display: flex;
  align-items: center;
}

.navbar .right {
  margin-right: $navbar-icon-edge-spacing;
  height: 100%;
  display: flex;
  align-items: center;
}

// Override default link padding for icon-only buttons in navbar
.navbar .left .link.icon-only,
.navbar .right .link.icon-only {
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.navbar {
  border-color: #efeff4;
  border-style: solid;
  border-width: 8px 8px 0px 8px;
  background-color: var(--hm-top-safe-area-color);

  .navbar-inner {
    background-color: var(--f7-navbar-bg-color);
    background-clip: content-box;
  }
}

.secondary-navbar>.subnavbar-inner {
  padding-left: 0px;
  padding-right: 0px;
}

// Add margin to back button in secondary navbar for focus indicator visibility
.secondary-navbar>.back-button {
  margin-left: $navbar-icon-edge-spacing;
  margin-right: $navbar-icon-edge-spacing;

  &>i {
    color: $subnavbar-background;
  }
}

/* Navbar Back and Menu buttons */
.navbar-f7-icons {
  font-weight: bold;
  color: white;
}

/* Navbar dropdown icons */
.navbar .top-left-menu .icon,
.navbar .top-right-menu .icon {
  background-color: $navbar-background;
  width: 36px;
  height: 36px;
  min-width: 36px;
  min-height: 36px;
  aspect-ratio: 1 / 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  font-weight: bold;
}


.navbar-right {
  margin-left: auto;
}

.navbar-home-title {
  padding-left: 10px;
}


/* Content pages */
.page.content ul,
.page.content ol {
  padding-left: 20px;
}

.page.content ul>li,
.page.content ol>li {
  margin-bottom: 10px;
}